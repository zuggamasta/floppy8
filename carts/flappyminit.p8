pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- constants
g = 0.2
-- globals
s = 0
function _init()
	palt(0, false)
	palt(11, true)
	game={
		minx=28+rnd(20),
		miny=0+rnd(20),
		maxx=128-28-rnd(20),
		maxy=128-rnd(20)
	}
	bird={sp=1,
				x=64,
				y=64,
				vx=0,
				vy=0,
				n=0,
				pnts=0
				}
	i_pipes()

end

-->8

function _update()
  move_player()
	u_pipes()
end

function i_pipes()
	pipes={
		x1=game.maxx,
		y1=rnd(32)+48
	}

end

function u_pipes()
	pipes.x1-=1
	if pipes.x1 < game.minx-16 then
		pipes.x1=game.maxx
		pipes.y1=rnd(32)+48
	end
end

function d_pipes()
	spr(56,pipes.x1,pipes.y1,2,1)
end

-->8
function _draw()
  cls(5)
	rectfill(game.minx,game.miny,game.maxx,game.maxy,0)
  
  s+=1

	d_pipes()
  
  draw_sprite(game.maxx-16,game.miny)
  
  draw_player(bird.x,bird.y)
  
 	draw_coin(64,64)

  
  bird.n+=1

	rectfill(0,0,game.minx,128,5)
	rectfill(game.maxx,0,128,128,5)


	--debug
	print('deubg:',0)

	draw_points(bird.pnts)

end

function draw_player(x,y)
	size = 2
	spr(flr(bird.n/2)%4*2,x-8,y-8,size,size)
end

function draw_coin(x,y)
	spr(10+flr(s/4)%4,x,y)
end

function draw_sprite(x,y,h,f)
	spr(14,x,y,2,2)
end

function draw_points(points)
	x =64
	y =16

	print(tostr(points),x+1,y,0)
	print(tostr(points),x,y+1,0)
	print(tostr(points),x-1,y,0)
	print(tostr(points),x,y-1,0)
	print(tostr(points),x,y,10)

	
end
-->8
function move_player()
		if (btn(0)) then bird.x=bird.x-1 end
  if (btn(1)) then bird.x=bird.x+1 end
  if (btn(2)) then
  	bird.y=bird.y-1
  	bird.vy = -1
  else
  	bird.vy += g
  	bird.n = 0
 	end
 	
 	if bird.y>game.maxy then
 		bird.y=bird.y-1
 		bird.vy=-2
 	end
 	
 	if bird.x < game.minx then bird.x = game.minx end
 	if bird.x > game.maxx then bird.x = game.maxx end
 	
 	bird.y+=bird.vy
 	
 	if bird.y < game.miny then bird.y = game.miny end


end

__gfx__
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb00000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000bbbb0000bbbb0000bbbb0000bbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbb00000bbbbbbbbbb0777770bbbbbbbbb00000bbbbbbbbbbbbbbbbbbbbbbbb07070bb077770bb07070bbb077770bbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbb0777770bbbbbbbb077777770bbbbbbb0777770bbbbbbbbbbbbbbbbbbbbbb0707070077707700707770b07777770bbbbbbbbbbbbbbbb
bbbbb00000bbbbbbbbbb077777770bbbbbb07777777770bbbbb077777770bbbbbbbbb00000bbbbbbb0707070077007700707770b07777770bbbbbbbbbbbbbbbb
bbbb0777770bbbbbbbb07707777070bbbbb077777777700bbb07707777070bbbbbbb0777770bbbbbb0707070077707700707770b07777770bbbbbbbbbbbbbbbb
bbb077777770bbbbbbb077077770700bbbb0777777777770bb077077770700bbbbb077777770bbbbb0707070077707700707770b07777770bbbbbbb00000bbbb
bb07707777070bbbbbb0777777777770bbb000770000000bbb0777777777770bbb07707777070bbbbb07070bb077770bb07070bbb077770bbbbbbb0777770bbb
bb077077770700bbbbb000770000000bbbbb077777777770bb000770000000bbbb077077770700bbbb0000bbbb0000bbbb0000bbbb0000bbbbbbbb07070070bb
bb0777777777770bbb00077777777770bbb077077770000bbbb077777777770bbb0777777777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0777770bbb
00007770000000bbb00777077770000bbb0777077770bbbbbbb07777770000bbbb007770000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb00b00077000bbbb
077007777777770bb07770077770bbbbbb0770777770bbbbbbb07707770bbbbbbbb007777777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0770777770bbbbbb
00777777770000bbb00000777770bbbbbbb00000070bbbbbbbb00077770bbbbbbbbb0777770000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb070770000000bbb
b0000777770bbbbbbbbb0700070bbbbbbbbbb0bbb0bbbbbbbbbb0700070bbbbbbbbb0777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0707777777770bb
bbbb0777770bbbbbbbbbb0bbb0bbbbbbbbbbbbbbbbbbbbbbbbbbb0bbb0bbbbbbbbbb0777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0700000000770bb
bbbb0700070bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0700070bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0777777777770bb
bbbbb0bbb0bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0bbb0bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb00000000000bbb
bbb077777770bbbbb0b077777770bbbbbbbb077777770bbbbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb077770770bbbb070077777070bbbbbbbb070777700bbbbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb070770770bbbb070070777070bbbbbbbb077777770bbbbbb070777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bb0700077770bbbb070077077070bbbbbbbb077777770bbbbbb077777070bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bb0700077770bbbb077777777770bbbbbbbb077777770bbbbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bb0700077770bbbbb00777777770bbbbbbbb007777770bbbbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb070777770bbbbbbb007777770bbbbbbbb077777770b0bbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb077777770bbbbbbb007777770bbbbbbbb077770770070bbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb000077070bbbbbbb077077770bbbbbbbb07777770b070bbb077077770bbbbbbbbb00000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb077777770bbbbbbb077777770bbbbbbbb077777700070bbb07707770bbbbbbbbb0777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb077770770bbbbbbb077777700bbbbbbbb077777777070bbb07777770bbbbbbbb007000770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbb077777770bbbbbbb077777770bbbbbbbb07777777770bbbb07777770bbbbbbbb077700000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bb077777777700bbbbb077777770bbbbbbbb0707707700bbbbb077777770bbbbbbb070777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
b07770077007770bbbb077777770bbbbbbbb070777070bbbbbb077777770bbbbbbb070777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bb0000070bb000bbbbb007777070bbbbbbbb070777770bbbbbb077777070bbbbbbb077777070bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbb0bbbbbbbbbbb077777070bbbbbbbb077777770bbbbbb077777770bbbbbbb077777770bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
